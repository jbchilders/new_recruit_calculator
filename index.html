<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goal-Oriented Negotiation Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for selected buttons */
        .selected-button {
            background-color: #3b82f6 !important; /* Blue 500 */
            border-color: #2563eb !important; /* Blue 600 */
            color: white !important;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="app" class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900">New Recruit Negotiation</h1>
            <p class="text-lg text-gray-600 mt-2">Select your preferred options to calculate your score and track your goal.</p>
        </header>

        <main id="issues-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-48">
            <!-- Issues will be dynamically inserted here by JavaScript -->
        </main>

    </div>

    <footer class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm border-t border-gray-200 shadow-lg p-4">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            
            <button id="clear-all-btn" class="w-full md:w-auto order-last md:order-first bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                Clear All Selections
            </button>
            
            <div class="flex items-center justify-center gap-6">
                <div class="text-center">
                    <span id="goal-label" class="text-sm font-semibold text-gray-600 block">Performance vs. Goal</span>
                    <span id="goal-percentage" class="text-2xl font-bold transition-all duration-300">N/A</span>
                </div>
                <div class="text-center">
                    <span class="text-sm font-semibold text-gray-600 block">Total Points</span>
                    <span id="total-sum" class="text-3xl font-bold transition-all duration-300 w-32">0</span>
                    <div class="text-xs text-gray-500 mt-1">
                        Split (Me/Co): <span id="split-percentage" class="font-semibold">40% / 60%</span>
                    </div>
                </div>
            </div>

            <div class="flex flex-col items-center justify-center">
                 <div class="flex items-center gap-2">
                    <input type="number" id="goal-input" placeholder="e.g., 10000" class="p-2 border border-gray-300 rounded-lg w-32 text-center">
                    <button id="set-goal-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">Set Goal</button>
                </div>
                <p class="text-xs text-gray-500 mt-1">(Reminder: Midpoint is 2,400 pts)</p>
            </div>

        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DATA & CONSTANTS ---
            const issues = [
                { name: "Salary", options: [ { name: "$90,000", points: 0 }, { name: "$88,000", points: -1500 }, { name: "$86,000", points: -3000 }, { name: "$84,000", points: -4500 }, { name: "$82,000", points: -6000 } ] },
                { name: "Bonus", options: [ { name: "10%", points: 4000 }, { name: "8%", points: 3000 }, { name: "6%", points: 2000 }, { name: "4%", points: 1000 }, { name: "2%", points: 0 } ] },
                { name: "Moving Expense Coverage", options: [ { name: "100%", points: 3200 }, { name: "90%", points: 2400 }, { name: "80%", points: 1600 }, { name: "70%", points: 800 }, { name: "60%", points: 0 } ] },
                { name: "Job Assignment", options: [ { name: "Division A", points: 0 }, { name: "Division B", points: -600 }, { name: "Division C", points: -1200 }, { name: "Division D", points: -1800 }, { name: "Division E", points: -2400 } ] },
                { name: "Starting Date", options: [ { name: "June 1", points: 2400 }, { name: "June 15", points: 1800 }, { name: "July 1", points: 1200 }, { name: "July 15", points: 600 }, { name: "August 1", points: 0 } ] },
                { name: "Vacation Time", options: [ { name: "25 days", points: 1600 }, { name: "20 days", points: 1200 }, { name: "15 days", points: 800 }, { name: "10 days", points: 400 }, { name: "5 days", points: 0 } ] },
                { name: "Location", options: [ { name: "San Francisco", points: 1200 }, { name: "Atlanta", points: 900 }, { name: "Chicago", points: 600 }, { name: "Boston", points: 300 }, { name: "New York", points: 0 } ] },
                { name: "Insurance Coverage", options: [ { name: "Plan A", points: 800 }, { name: "Plan B", points: 600 }, { name: "Plan C", points: 400 }, { name: "Plan D", points: 200 }, { name: "Plan E", points: 0 } ] }
            ];
            const MIN_POINTS = -8400;
            const MAX_POINTS = 13200;
            const TOTAL_POINT_SWING = MAX_POINTS - MIN_POINTS; // 21600

            // --- DOM ELEMENTS ---
            const issuesContainer = document.getElementById('issues-container');
            const totalSumElement = document.getElementById('total-sum');
            const clearAllBtn = document.getElementById('clear-all-btn');
            const goalInputElement = document.getElementById('goal-input');
            const setGoalBtn = document.getElementById('set-goal-btn');
            const goalPercentageElement = document.getElementById('goal-percentage');
            const goalLabelElement = document.getElementById('goal-label');
            const splitPercentageElement = document.getElementById('split-percentage');

            // --- STATE ---
            let selections = Array(issues.length).fill(null);
            let goalPoints = null;

            // --- FUNCTIONS ---

            /**
             * Calculates total points and goal percentage, then updates the footer display.
             */
            function updateDisplay() {
                const total = selections.reduce((sum, points) => sum + (points !== null ? points : 0), 0);
                totalSumElement.textContent = total.toLocaleString();

                // --- Performance vs. Goal Calculation ---
                let percentageText = 'N/A';
                goalLabelElement.textContent = 'Performance vs. Goal';
                goalPercentageElement.classList.remove('text-green-600', 'text-red-600', 'text-gray-600');

                if (goalPoints !== null) {
                    let percentage = 0;
                    if (total >= goalPoints) {
                        const range = MAX_POINTS - goalPoints;
                        percentage = range === 0 ? (total === MAX_POINTS ? 100 : 0) : ((total - goalPoints) / range) * 100;
                    } else { // total < goalPoints
                        const range = goalPoints - MIN_POINTS;
                        percentage = range === 0 ? (total === MIN_POINTS ? -100 : 0) : ((total - goalPoints) / range) * 100;
                    }
                    percentageText = `${percentage.toFixed(1)}%`;

                    if (percentage >= 0) {
                        goalPercentageElement.classList.add('text-green-600');
                    } else {
                        goalPercentageElement.classList.add('text-red-600');
                    }
                } else {
                     goalPercentageElement.classList.add('text-gray-600');
                }
                goalPercentageElement.textContent = percentageText;

                // --- Point Split Calculation ---
                const myShare = total - MIN_POINTS;
                const myPercentage = Math.round((myShare / TOTAL_POINT_SWING) * 100);
                const companyPercentage = 100 - myPercentage;
                splitPercentageElement.textContent = `${myPercentage}% / ${companyPercentage}%`;

            }

            /**
             * Sets the negotiation goal from the input field.
             */
            function handleSetGoal() {
                const inputValue = goalInputElement.value;
                if (inputValue.trim() === '') {
                    goalPoints = null;
                } else {
                    goalPoints = parseInt(inputValue, 10);
                }
                updateDisplay();
            }
            
            function handleIssueInteraction(event) {
                const button = event.target.closest('button');
                if (!button) return;

                const issueIndex = parseInt(button.dataset.issueIndex, 10);
                const action = button.dataset.action;

                if (action === 'select-option') {
                    selections[issueIndex] = parseInt(button.dataset.points, 10);
                } else if (action === 'clear-issue') {
                    selections[issueIndex] = null;
                }
                
                renderIssues(); 
                updateDisplay();
            }

            function clearAllSelections() {
                selections.fill(null);
                renderIssues();
                updateDisplay();
            }

            function renderIssues() {
                let content = '';
                issues.forEach((issue, issueIndex) => {
                    content += `
                        <div class="bg-white p-4 rounded-lg shadow-md border border-gray-200 flex flex-col h-full">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-bold text-gray-800">${issue.name}</h3>
                                <button class="text-xs font-semibold text-blue-600 hover:text-blue-800" data-issue-index="${issueIndex}" data-action="clear-issue">
                                    Clear
                                </button>
                            </div>
                            <div class="flex flex-col space-y-2 mt-auto">`;
                    issue.options.forEach((option) => {
                        const isSelected = selections[issueIndex] === option.points;
                        content += `
                            <button 
                                class="w-full text-left p-3 rounded-lg border border-gray-300 bg-gray-50 hover:bg-gray-200/50 transition-all duration-200 flex justify-between items-center ${isSelected ? 'selected-button' : ''}"
                                data-issue-index="${issueIndex}"
                                data-points="${option.points}"
                                data-action="select-option"
                            >
                                <span class="font-medium">${option.name}</span>
                                <span class="text-sm font-semibold py-1 px-2 rounded-full ${option.points > 0 ? 'bg-green-100 text-green-800' : (option.points < 0 ? 'bg-red-100 text-red-800' : 'bg-gray-200 text-gray-700')}">
                                    ${option.points.toLocaleString()} pts
                                </span>
                            </button>`;
                    });
                    content += `</div></div>`;
                });
                issuesContainer.innerHTML = content;
            }

            // --- INITIALIZATION ---
            issuesContainer.addEventListener('click', handleIssueInteraction);
            clearAllBtn.addEventListener('click', clearAllSelections);
            setGoalBtn.addEventListener('click', handleSetGoal);
            
            // Allow setting goal by pressing Enter in the input field
            goalInputElement.addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    handleSetGoal();
                }
            });

            renderIssues();
            updateDisplay();
        });
    </script>

</body>
</html>
